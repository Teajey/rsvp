package rsvp // import "github.com/Teajey/rsvp"

CONSTANTS

const (
	SupportedMediaTypePlaintext string = "text/plain"
	SupportedMediaTypeHtml      string = "text/html"
	SupportedMediaTypeCsv       string = "text/csv"
	SupportedMediaTypeBytes     string = "application/octet-stream"
	SupportedMediaTypeJson      string = "application/json"
	SupportedMediaTypeXml       string = "application/xml"
	SupportedMediaTypeGob       string = "application/vnd.golang.gob"
)

VARIABLES

var ErrFailedToMatchHtmlTemplate = errors.New("TemplateName was set, but it failed to match within HtmlTemplate")
var ErrFailedToMatchTextTemplate = errors.New("TemplateName was set, but it failed to match within TextTemplate")

FUNCTIONS

func AdaptHandler(cfg Config, next Handler) http.Handler

func AdaptHandlerFunc(cfg Config, next HandlerFunc) http.HandlerFunc

func Write(w io.Writer, cfg Config, wh http.Header, r *http.Request, handler HandlerFunc) (int, error)

func WriteHandler(cfg Config, rw http.ResponseWriter, r *http.Request, handler HandlerFunc) error

func WriteResponse(status int, w http.ResponseWriter, r io.Reader) error

TYPES

type Config struct {
	HtmlTemplate *html.Template
	TextTemplate *text.Template
	JsonPrefix string
	JsonIndent string
	XmlPrefix string
	XmlIndent string
}

type Csv interface {
	MarshalCsv(w *csv.Writer) error
}

type Handler interface {
	ServeHTTP(w ResponseWriter, r *http.Request) Response
}

type HandlerFunc func(w ResponseWriter, r *http.Request) Response

func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *http.Request) Response

type Html string

type Response struct {
	Data any
	TemplateName string

	// Has unexported fields.
}

func Blank() Response

func Data(data any) Response

func (res *Response) MediaTypes(cfg Config) iter.Seq[string]

func (r Response) StatusAccepted() Response

func (r Response) StatusBadRequest() Response

func (r Response) StatusConflict() Response

func (r Response) StatusCreated(location string) Response

func (r Response) StatusForbidden() Response

func (r Response) StatusFound(location string) Response

func (r Response) StatusGone() Response

func (r Response) StatusInternalServerError() Response

func (r Response) StatusMethodNotAllowed() Response

func (r Response) StatusMovedPermanently(location string) Response

func (r Response) StatusNoContent() Response

func (r Response) StatusNotAcceptable() Response

func (r Response) StatusNotFound() Response

func (r Response) StatusNotImplemented() Response

func (r Response) StatusNotModified() Response

func (r Response) StatusPermanentRedirect(location string) Response

func (r Response) StatusSeeOther(location string) Response

func (r Response) StatusServiceUnavailable() Response

func (r Response) StatusTemporaryRedirect(location string) Response

func (r Response) StatusTooManyRequests() Response

func (r Response) StatusUnauthorized() Response

func (r Response) StatusUnprocessableEntity() Response

type ResponseWriter interface {
	Header() http.Header
	DefaultTemplateName(name string)
}

type ServeMux struct {
	Std    *http.ServeMux
	Config Config
}

func NewServeMux() *ServeMux

func (m *ServeMux) Handle(pattern string, handler Handler)

func (m *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *http.Request) Response)

func (m *ServeMux) ServeHTTP(w http.ResponseWriter, r *http.Request)
